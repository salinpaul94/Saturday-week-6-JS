const foodItem = [
    {
    id: 1,
    name: 'Ambur Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 13,
    img: 'images/biryani/Ambur-Chicken-Biryani.jpg',
    quantity: 1
},
{
    id: 2,
    name: 'Hyderabadi Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 15,
    img: 'images/biryani/Chicken-Biryani-hyd.jpg',
    quantity: 1
},
{
    id: 3,
    name: 'Egg Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 18,
    img: 'images/biryani/egg-biryani.jpeg',
    quantity: 1
},
{
    id: 4,
    name: 'Goan Fish Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 15,
    img: 'images/biryani/goan-fish-biryani.jpg',
    quantity: 1
},
{
    id: 5,
    name: 'Mutton Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 10,
    img: 'images/biryani/hyd-Mutton-Biryani.jpg',
    quantity: 1
},
{
    id: 6,
    name: 'Kamrupi Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 12,
    img: 'images/biryani/kamrupi-biryani.jpg',
    quantity: 1
},
{
    id: 7,
    name: 'Kashmiri Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 13,
    img: 'images/biryani/kashmiri.pulao.jpg',
    quantity: 1
},
{
    id: 8,
    name: 'Memoni Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 20,
    img: 'images/biryani/memonibiryani.png',
    quantity: 1
},
{
    id: 9,
    name: 'Mughlai Biryani',
    category : 'biryani',
    rating : 4.3,
    price: 15,
    img: 'images/biryani/mughlai-biryani.jpg',
    quantity: 1
},
{
    id: 10,
    name: 'Chicken Roast',
    category : 'chicken',
    rating : 4.3,
    price: 11,
    img: 'images/chicken/Chicken_roast.jpg',
    quantity: 1
},
{
    id: 11,
    name: 'Chicken Curry',
    category : 'chicken',
    rating : 4.3,
    price: 10,
    img: 'images/chicken/Chicken-Curry.jpg',
    quantity: 1
},
{
    id: 12,
    name: 'Chicken Do Pyaza',
    category : 'chicken',
    rating : 4.3,
    price: 14,
    img: 'images/chicken/Chicken-do-Pyaza.jpg',
    quantity: 1
},
{
    id: 13,
    name: 'Chicken Masala',
    category : 'chicken',
    rating : 4.3,
    price: 12,
    img: 'images/chicken/Chicken-Masala.jpeg',
    quantity: 1
},
{
    id: 14,
    name: 'Handi Chicken',
    category : 'chicken',
    rating : 4.3,
    price: 17,
    img: 'images/chicken/Handi-chicken.jpg',
    quantity: 1
},
{
    id: 15,
    name: 'Murgh Musallam',
    category : 'chicken',
    rating : 4.3,
    price: 20,
    img: 'images/chicken/Murgh-Musallam.jpg',
    quantity: 1
},
{
    id: 16,
    name: 'Matar Paneer',
    category : 'paneer',
    rating : 4.3,
    price: 15,
    img: 'images/paneer/Matar-Paneer.jpg',
    quantity: 1

},
{
    id: 17,
    name: 'Palak Paneer',
    category : 'paneer',
    rating : 4.3,
    price: 10,
    img: 'images/paneer/palak-paneer.jpg',
    quantity: 1
},
{
    id: 18,
    name: 'Paneer Butter Masala',
    category : 'paneer',
    rating : 4.3,
    price: 15,
    img: 'images/paneer/paneer-butter-masala.jpg',
    quantity: 1

},
{
    id: 19,
    name: 'Paneer Do Pyaza',
    category : 'paneer',
    rating : 4.3,
    price: 12,
    img: 'images/paneer/Paneer-Do-Pyaza.jpg',
    quantity: 1

},
{
    id: 20,
    name: 'Hyderabadi Paneer',
    category : 'paneer',
    rating : 4.3,
    price: 8,
    img: 'images/paneer/Paneer-Hyderabadi.jpg',
    quantity: 1
},
{
    id: 21,
    name: 'Paneer Lababdar',
    category : 'paneer',
    rating : 4.3,
    price: 7,
    img: 'images/paneer/paneer-lababdar.jpg',
    quantity: 1
},
{
    id: 22,
    name: 'Shahi Paneer',
    age: '32',
    category : 'paneer',
    rating : 4.3,
    price: 5,
    img: 'images/paneer/shahi-paneer.jpg',
    quantity: 1
},
{
    id: 23,
    name: 'Navratan Korma',
    category : 'vegetable',
    rating : 4.3,
    price: 8,
    img: 'images/vegetable/navratan-korma_-vegetable.png',
    quantity: 1
},
{
    id: 24,
    name: 'Veg Jalfrezi',
    category : 'vegetable',
    rating : 4.3,
    price: 7,
    img: 'images/vegetable/VEG-JALFREZI.jpg',
    quantity: 1
},
{
    id: 25,
    name: 'Veg Biryani',
    category : 'vegetable',
    rating : 4.3,
    price: 5,
    img: 'images/vegetable/vegetable-biryani.jpg',
    quantity: 1
},
{
    id: 26,
    name: 'Veg Curry',
    category : 'vegetable',
    rating : 4.3,
    price: 7,
    img: 'images/vegetable/vegetable-curry.jpeg',
    quantity: 1
},
{
    id: 27,
    name: 'Veg Kolhapur',
    category : 'vegetable',
    rating : 4.3,
    price: 10,
    img: 'images/vegetable/vegetable-kolhapuri.jpg',
    quantity: 1
},
{
    id: 28,
    name: 'Veg Masala',
    category : 'vegetable',
    rating : 4.3,
    price: 4,
    img: 'images/vegetable/vegetable-masala.jpg',
    quantity: 1
},
{
    id: 29,
    name: 'Veg Pakora',
    category : 'vegetable',
    rating : 4.3,
    price: 4,
    img: 'images/vegetable/vegetable-pakora.jpg',
    quantity: 1
},
{
    id: 30,
    name: 'Momos',
    category : 'chinese',
    rating : 4.3,
    price: 8,
    img: 'images/chinese/cabbage-momos-.jpg',
    quantity: 1
},
{
    id: 31,
    name: 'Chicken Manchurian',
    category : 'chinese',
    rating : 4.3,
    price: 7,
    img: 'images/chinese/ChickenManchurian.jpg',
    quantity: 1
},
{
    id: 32,
    name: 'Chili Chicken',
    category : 'chinese',
    rating : 4.3,
    price: 5,
    img: 'images/chinese/Chili-Chicken.jpg',
    quantity: 1
},
{
    id: 33,
    name: 'Chowmein',
    category : 'chinese',
    rating : 4.3,
    price: 16,
    img: 'images/chinese/chowmin.jpg',
    quantity: 1
},
{
    id: 34,
    name: 'Spring Roll',
    category : 'chinese',
    rating : 4.3,
    price: 14,
    img: 'images/chinese/spring-rolls.jpg',
    quantity: 1
},
{
    id: 35,
    name: 'Szechuan Chicken',
    category : 'chinese',
    rating : 4.3,
    price: 10,
    img: 'images/chinese/szechuan-chicken.jpg',
    quantity: 1
},
{
    id: 36,
    name: 'Fried Rice',
    category : 'chinese',
    rating : 4.3,
    price: 8,
    img: 'images/chinese/veg-fried-rice.jpg',
    quantity: 1
},
{
    id: 37,
    name: 'Butter Masala Dosa',
    category : 'south indian',
    rating : 4.3,
    price: 18,
    img: 'images/south indian/Butter-Masala-Dosa.png',
    quantity: 1
},
{
    id: 38,
    name: 'Idli',
    category : 'south indian',
    rating : 4.3,
    price: 20,
    img: 'images/south indian/idli-with-rice-flour.jpg',
    quantity: 1
},
{
    id: 39,
    name: 'Masala Dosa',
    category : 'south indian',
    rating : 4.3,
    price: 12,
    img: 'images/south indian/masala-dosa.jpg',
    quantity: 1
},
{
    id: 40,
    name: 'Mysore Bonda',
    category : 'south indian',
    rating : 4.3,
    price: 10,
    img: 'images/south indian/mysore-bonda.jpg',
    quantity: 1
},
{
    id: 41,
    name: 'Onion Uttapam',
    category : 'south indian',
    rating : 4.3,
    price: 15,
    img: 'images/south indian/onion-uttapam.jpg',
    quantity: 1
},
{
    id: 42,
    name: 'Plain Dosa',
    category : 'south indian',
    rating : 4.3,
    price: 40,
    img: 'images/south indian/plain-dosa.jpeg',
    quantity: 1
},
{
    id: 43,
    name: 'Rava Uttapam',
    category : 'south indian',
    rating : 4.3,
    price: 25,
    img: 'images/south indian/Rava-Uttapam.jpg',
    quantity: 1
},
{
    id: 44,
    name: 'Sambhar Vada',
    category : 'south indian',
    rating : 4.3,
    price: 34,
    img: 'images/south indian/sambhar-vada.jpg',
    quantity: 1
},
]

function displayItems() {

    let biryani = document.getElementById("biryani");
    let paneer = document.getElementById("paneer");
    let chicken = document.getElementById("chicken");
    let vegetable = document.getElementById("vegetable");
    let chinese = document.getElementById("chinese");
    let southIndian = document.getElementById("south-indian");

    let catList = [biryani, paneer, chicken, vegetable, chinese, southIndian];

    let biryaniData = foodItem.filter(each => each.category == "biryani");
    let paneerData = foodItem.filter(each => each.category == "paneer");
    let chickenData = foodItem.filter(each => each.category == "chicken");
    let vegetableData = foodItem.filter(each => each.category == "vegetable");
    let chineseData = foodItem.filter(each => each.category == "chinese");
    let southIndianData = foodItem.filter(each => each.category == "south indian");

    let bifurgatedDate = [biryaniData, paneerData, chickenData, vegetableData, chineseData, southIndianData];

    bifurgatedDate.forEach( ( eachCategoryData, ind ) => {
        eachCategoryData.map(eachFoodItem => {
            let itemCard = document.createElement("div");
            itemCard.setAttribute('id', 'item-card');

            let cardTop = document.createElement("div");
            cardTop.setAttribute('id', 'card-top');

            let rating = document.createElement("i");
            rating.setAttribute('class', 'fa fa-star');
            rating.setAttribute('id', 'rating');
            rating.innerText = ' ' + eachFoodItem.rating;

            let heart = document.createElement( "i" );
            heart.setAttribute('class', 'fa fa-heart-o add-to-cart');
            heart.setAttribute('id', eachFoodItem.id);

            cardTop.appendChild( rating );
            cardTop.appendChild( heart );

            let img = document.createElement( "img" );
            img.src = eachFoodItem.img

            let itemName = document.createElement( "p" );
            itemName.setAttribute("id", "item-name" );
            itemName.innerText = eachFoodItem.name;

            let itemPrice = document.createElement( "p" );
            itemPrice.setAttribute( "id", "item-price" );
            itemPrice.innerText = `Price : $ ${eachFoodItem.price}`;

            itemCard.appendChild( cardTop );
            itemCard.appendChild( img );
            itemCard.appendChild( itemName );
            itemCard.appendChild( itemPrice );


            catList[ind].appendChild(itemCard);
        })
    })
};

displayItems();

let quickNav = [...new Map(foodItem.map(each => [each['category'], each])).values()];
console.log(quickNav);

function selectTaste() {
    let categoryList = document.getElementById( 'category-list' );

    quickNav.map( each => {
        let listCard = document.createElement( "div" );
        listCard.setAttribute( "class", "list-card" );

        let listImg = document.createElement( "img" );
        listImg.src = each.img;

        let listName = document.createElement( "a" );
        listName.setAttribute( "class", "list-name" );
        listName.innerText = each.category;
        if(each.category == "south indian"){
            listName.setAttribute("href", '#south-indian');
        } else {
            listName.setAttribute( "href", '#' + each.category );
        }
        
        listCard.appendChild( listImg );
        listCard.appendChild( listName );
        
        let clonedCard = listCard.cloneNode(true);
        categoryList.appendChild( listCard );
        document.querySelector( ".category-header" ).appendChild( clonedCard );
    })
}

selectTaste();

document.querySelectorAll('.add-to-cart').forEach(each => {
    each.addEventListener( 'click', addItemInCart)
});

let cartItem = [];
function addItemInCart() {
    let itemToAdd = this.parentNode.nextSibling.nextSibling.innerText;
    let itemObj = foodItem.find(each => each.name == itemToAdd);
    // console.log(itemObj);
    let ind = cartItem.indexOf(itemObj);
    if(ind == -1) {
        document.getElementById(itemObj.id).classList.add("toggle-heart");
        // cartItem = [...cartItem, itemObj];
        cartItem.push(itemObj);
    } else {
        alert("Item already added");
        // document.getElementById(itemObj.id).classList.remove("toggle-heart");
    }
    document.getElementById("cart-plus").innerText = ' ' + cartItem.length + ' Items ';
    cartItemsList();
    totalAmt();
};

function cartItemsList() {

    let tableDiv = document.getElementById("table-body");
    tableDiv.innerHTML = '';

    cartItem.map(each => {
        let tRow = document.createElement("tr");
        let rowData1 = document.createElement("td");
        let img = document.createElement("img");
        img.src = each.img;
        rowData1.appendChild(img);
        
        let rowData2 = document.createElement("td");
        rowData2.innerText = each.name;

        let rowData3 = document.createElement("td");
        let btn1 = document.createElement('button');
        btn1.setAttribute('class', 'decrease-item');
        btn1.innerText = '-';
        let span = document.createElement('span');
        span.innerText = each.quantity;

        let btn2 = document.createElement('button');
        btn2.setAttribute('class', 'increase-item');
        btn2.innerText = "+";

        rowData3.appendChild( btn1 );
        rowData3.appendChild(  span );
        rowData3.appendChild( btn2 );

        let rowData4 = document.createElement("td");
        rowData4.innerText = each.price;

        tRow.appendChild( rowData1);
        tRow.appendChild( rowData2);
        tRow.appendChild( rowData3);
        tRow.appendChild( rowData4);

        tableDiv.appendChild( tRow );
    })
};

function totalAmt() {
    let sum = 0;
    cartItem.map(eachItem => {
        sum = sum + eachItem.price;
    });

    document.getElementById('total-item').innerText = "Total Items : " + cartItem.length;
    document.getElementById('total-price').innerText = "Total Price : $" + sum;
}

document.getElementById("cart-plus").addEventListener( 'click', cartToggle);
let flag = false;
function cartToggle() {
    if(cartItem.length > 0) {
        document.getElementById( "food-items" ).classList.toggle( 'food-items' );
        document.getElementById( "category-list" ).classList.toggle( 'food-items' );

        document.getElementById('cart-page').classList.toggle( 'cart-toggle' );
        document.getElementById( 'checkout' ).classList.toggle( 'cart-toggle' );
        flag = true;
    } else {
        alert( "no item in the cart ");
    }
}

document.getElementById("add-address").addEventListener( 'click', addAddAddress );

function addAddAddress() {
    let add = prompt("Enter your address");
    if(add) {
        document.getElementById('add-address').innerText = ' ' + add
    } else {
        alert("Address not added");
    }
}